# Empathy Synthesizer Agent Specification

## Overview

The Empathy Synthesizer is an AI agent designed to transform raw user research data into structured empathy maps and actionable insights. It processes various forms of user feedback to build comprehensive understanding of user segments, their goals, pains, and needs.

## Agent Capabilities

### Core Functionality
- **Data Ingestion**: Processes call transcripts, CRM notes, surveys, and support tickets
- **Empathy Mapping**: Generates structured empathy maps (Say/Think/Do/Feel) per user segment
- **Insight Extraction**: Identifies user goals, pains, gains, and key quotes
- **PII Protection**: Automatically redacts personally identifiable information
- **Consent Management**: Tracks and validates user consent for data processing

### Technical Capabilities
- **Direct Processing**: Direct analysis of support ticket content and metadata
- **PII Redaction**: Automated identification and redaction of sensitive information
- **Sentiment & Topic Analysis**: Emotional and thematic analysis of user feedback
- **HITL (Human-in-the-Loop)**: Human oversight for editing, approval, and curation
- **Document Generation**: Creates empathy maps, reports, and documentation

## Inputs & Outputs

### Input Sources
- Support tickets

### Outputs
- Empathy maps per user segment
- Key insights and latent needs
- Consent and PII compliance reports
- Structured research documentation

## Implementation Architecture

### Data Pipeline
1. **Ingest** support tickets → Direct processing pipeline
2. **PII/Consent Guard** redacts or flags risk before storage
3. **Topic Modeling** + emotion/sentiment + quote extraction → empathy map
4. **HITL Gates** confirm consent scope, approve redactions, curate final empathy map

### Tools & Integrations (Optional - Mocked for Initial Development)
- `calendar.createInterview()` - Schedule follow-up interviews
- `gdrive.createDoc()` - Generate empathy map documents
- `zoom.fetchTranscript()` - Extract meeting transcripts
- `docusign.sendConsent()` - Manage consent forms

**Note**: These tools will be mocked during initial development and can be integrated later as needed.

### Key Performance Indicators (KPIs)
- **Coverage**: Participants × minutes analyzed
- **Duplicate Insight Rate**: Measure of unique vs. redundant insights
- **Time-to-Synthesis**: Speed from data ingestion to final empathy map

## Prompt Templates

### Insight Extraction Prompt
```
From the support tickets in research/onboarding/*, extract user goals, pains, and key quotes. 
Produce an empathy map per segment and a list of latent needs. Redact PII. 
Output as Markdown with sections.
```

## Governance & Risk Management

### Consent Lineage
- Store consent artifact IDs alongside each support ticket in the database
- Maintain audit trail of consent scope and validity

### PII Policy
- Default to redaction for all personally identifiable information
- Allow reversible masking only where strictly necessary with vaulted storage
- Implement strict access controls for sensitive data

### Bias & Fairness
- Ensure sampling diversity across user segments
- Require human reviewer sign-off on recruiting and insight coding
- Implement bias detection and mitigation protocols

### Auditability
- Every tool call and model output tied to a run ID
- Decision memos with approver identity and timestamp
- Complete audit trail for compliance and debugging

### Access Control
- Least-privileged access per agent
- Separate read vs. actuation scopes (e.g., read Figma vs. write)
- Role-based permissions for different user types

## Technical Stack

### Core Framework
- **Language**: Python
- **Agent Framework**: LangGraph
- **External Interface**: A2A (Agent-to-Agent) protocol
- **Model Control Protocol (MCP)**: Optional integration
- **Data Storage**: Local PostgreSQL database

### Dependencies
- NLP libraries for sentiment and topic analysis
- Document processing libraries
- API integrations for external tools (optional - can be mocked initially)

## Implementation Phases

### Phase 1: Core Pipeline
- Set up data ingestion and storage
- Implement basic PII redaction
- Create empathy map generation

### Phase 2: Advanced Features
- Add sentiment and topic analysis
- Implement HITL approval workflows
- Integrate external tool APIs (optional - can be mocked initially)

### Phase 3: Governance & Compliance
- Add consent management
- Implement audit trails
- Set up access controls

## Glossary

- **A2A Protocol**: Agent-to-Agent communication protocol
- **HITL**: Human-in-the-Loop - human oversight of AI processes
- **MCP**: Model Control Protocol - standardized interface for AI model interactions
- **PII**: Personally Identifiable Information
- **RAG**: Retrieval-Augmented Generation - AI technique combining search and generation
- **KPIs**: Key Performance Indicators - metrics to measure success
